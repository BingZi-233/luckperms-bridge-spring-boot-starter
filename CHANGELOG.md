# 更新日志

本项目遵循 [语义化版本 2.0.0](https://semver.org/lang/zh-CN/) 规范。

## [1.0.2]

### 修复
- 修复 `PreNetworkSyncEvent` 和 `PostNetworkSyncEvent` 中的属性命名冲突问题
  - 将 `type` 属性重命名为 `syncType`，以避免与 `LuckPermsEvent` 接口的 `getType()` 方法冲突
  - 保持 JSON 序列化兼容性，继续使用 "type" 作为 JSON 字段名
- 更新 `EventListener` 中的相关引用，使用新的属性名 `syncType`

## [1.0.1]

### 新增
- 添加 `GroupSearchResult` 数据类，用于表示组搜索结果
- 完善 API 接口文档
- 添加 Spring Web 支持，用于请求上下文处理

### 优化
- 重构权限检查相关实体类，提升类型安全性
- 优化依赖管理，按功能分类并添加注释
- 规范化查询选项和标志的枚举定义

### 修复
- 修复 `GroupApi` 中未解析的引用问题
- 修复 `HeaderUserIdentityService` 缺少 Web 依赖的问题
- 修复 `LuckPermsPermissionService` 中方法调用错误

## [1.0.0]

### 新增
- 初始版本发布
- 基础权限检查功能
- 组权限管理功能
- 用户权限管理功能

### ✨ 新特性
- 项目初始化
- 完成注解系统设计文档
  - 设计核心注解系统
  - 设计元数据注解系统
  - 设计工具注解系统
  - 定义枚举类型
  - 设计配置系统
- 实现实体类系统
  - 实现权限节点相关实体(Node、NodeType)
  - 实现权限上下文实体(Context)
  - 实现权限组实体(Group)
  - 实现用户实体(User)
  - 实现权限轨道实体(Track)
  - 实现操作记录相关实体(Action、ActionSource、ActionTarget、ActionTargetType)
  - 实现元数据实体(Metadata)
- 选定技术栈
  - 选用Retrofit2(2.11.0)作为HTTP客户端实现LuckPerms API调用
- 实现API接口系统
  - 实现用户管理接口(UserApi)
  - 实现组管理接口(GroupApi)
    - 基础CRUD操作
    - 权限节点管理
    - 权限检查功能
  - 实现轨道管理接口(TrackApi)
    - 基础CRUD操作
    - 轨道组管理功能
  - 实现操作记录接口(ActionApi)
    - 操作记录查询功能
    - 操作记录提交功能
  - 实现消息服务接口(MessagingApi)
    - 推送更新消息功能
    - 推送用户更新功能
    - 发送自定义消息功能
- 实现@RequirePermission注解系统
  - 实现权限检查注解
  - 实现权限服务接口和实现
  - 实现用户身份服务接口和实现
  - 实现权限检查切面处理器
- 实现@RequireGroup注解系统
  - 实现组权限检查注解
  - 实现组服务接口和实现
  - 实现组检查切面处理器
  - 复用已有的设计模式和服务架构
- 实现@WithContext注解系统
  - 实现上下文要求注解
  - 实现上下文服务接口和实现
  - 实现上下文检查切面处理器
  - 支持重复注解实现多上下文
  - 与权限检查注解协同工作
- 实现@EnableLuckPermsBridge注解
  - 实现启用注解
  - 优化自动配置机制
  - 简化使用方式
  - 提供清晰的使用文档

### 🔧 优化
- 实体类系统优化
  - 遵循SOLID原则拆分实体类
  - 添加详细的中文注释文档
  - 规范化字段验证注解
- API接口优化
  - 重构API接口实现,统一使用Retrofit2风格
  - 移除Spring MVC实现,保持接口单一职责
  - 完善API接口文档注释
- 注解系统优化
  - 遵循SOLID原则设计接口和实现
  - 分离权限检查和用户身份获取逻辑
  - 实现灵活的权限检查模式(ANY/ALL)
  - 添加详细的中文注释文档
- 代码复用优化
  - 复用CheckMode枚举
  - 复用UserIdentityService
  - 保持一致的异常处理机制
  - 统一的注解处理模式
- 切面处理优化
  - 优化切面执行顺序
  - 实现注解组合处理
  - 支持多上下文条件
  - 增强代码可读性
- 配置机制优化
  - 移除spring.factories配置
  - 使用@Import导入配置
  - 简化启用流程
  - 提高代码可维护性

### 🐛 修复
- 无

### 📝 文档
- 添加注解系统设计文档
- 添加项目进度跟踪文档
- 添加更新日志文档
- 更新实体类系统完成进度
- 更新API接口实现进度
  - 用户管理接口完成记录
  - 组管理接口完成记录
  - 轨道管理接口完成记录
  - 操作记录接口完成记录
- 更新项目进度文档
  - 添加注解系统实现进度
  - 更新下一步计划
- 更新更新日志
  - 记录注解系统实现细节
  - 记录代码优化内容
- 添加使用文档
  - 添加注解使用示例
  - 添加配置说明
  - 添加快速开始指南

### ⚡️ 性能优化
- 无

### 🔨 重构
- 无

### ⚠️ 破坏性变更
- 无

## 版本号说明

- 主版本号：当做了不兼容的 API 修改
- 次版本号：当做了向下兼容的功能性新增
- 修订号：当做了向下兼容的问题修正 